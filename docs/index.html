<html lang='en'>
<head>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script src="https://mozilla.github.io/pdf.js/build/pdf.js"></script>
</head>

<body>
<h1>Graphs</h1>
<div class='container'>
    <div class='row'>
        <div class='col'>
            <div class="dropdown">
                <button class="btn btn-secondary dropdown-toggle" type="button" id="datasetdropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Choose Dataset
                </button>
                <div class="dropdown-menu" aria-labelledby="datasetdropdown">
                    <a class="dropdown-item" href="#">SST</a>
                    <a class="dropdown-item" href="#">IMDB</a>
                    <a class="dropdown-item" href="#">20 News Group</a>
                </div>
            </div>
        </div>
        <div class='col'>
            <button class="btn btn-secondary dropdown-toggle" type="button" id="experimentdropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Choose Dataset
            </button>
            <div class="dropdown-menu" aria-labelledby="experimentdropdown">
                <a class="dropdown-item" href="#">Gradients</a>
                <a class="dropdown-item" href="#">Permutation Scatter</a>
                <a class="dropdown-item" href="#">Adversarial Historgram</a>
            </div>
        </div>
    </div>
    <div class='row'>
        <div class="col">
            <canvas id="pdfaveragetanh"></canvas>
        </div>
        <div class="col">
            <canvas id="pdfcnntanh"></canvas>
        </div>
        <div class="col">
            <canvas id="pdflstmtanh"></canvas>
        </div>
    </div>
    <div class='row'>
        <div class="col">
            <canvas id="pdfaveragedot"></canvas>
        </div>
        <div class="col">
            <canvas id="pdfcnndot"></canvas>
        </div>
        <div class="col">
            <canvas id="pdflstmdot"></canvas>
        </div>
    </div>
</div>
<script type='text/javascript'>
    var attentions = ['tanh', 'dot'];
    var encoders = ['average', 'cnn', 'lstm'];

    for(attn in attentions) {
        for(enc in encoders) {
            var attention = attentions[attn];
            var encoder = encoders[enc];
            if (encoder == 'cnn') {
                encoder = 'cnn(1,3,5,7)';
            }
            // If absolute URL from the remote server is provided, configure the CORS
            // header on that server.
            var url = '../graph_outputs/GradientXHist/20News_sports+' + encoder + '+' + attention + '.pdf';
            
            // Loaded via <script> tag, create shortcut to access PDF.js exports.
            var pdfjsLib = window['pdfjs-dist/build/pdf'];
            
            // The workerSrc property shall be specified.
            pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://mozilla.github.io/pdf.js/build/pdf.worker.js';
            
            // Asynchronous download of PDF
            var loadingTask = pdfjsLib.getDocument(url);
            loadingTask.promise.then(function(pdf) {
                console.log('PDF loaded');
                
                // Fetch the first page
                var pageNumber = 1;
                pdf.getPage(pageNumber).then(function(page) {
                console.log('Page loaded');
                
                var scale = 1.0;
                var viewport = page.getViewport({scale: scale});
            
                // Prepare canvas using PDF page dimensions
                var canvas = document.getElementById('pdf'+encoders[enc]+attentions[attn]);
                var context = canvas.getContext('2d');
                canvas.height = viewport.height;
                canvas.width = viewport.width;
            
                // Render PDF page into canvas context
                var renderContext = {
                    canvasContext: context,
                    viewport: viewport
                };
                var renderTask = page.render(renderContext);
                renderTask.promise.then(function () {
                    console.log('Page rendered');
                });
                });
            }, function (reason) {
                // PDF loading error
                console.error(reason);
            });
        }
    }
</script>
</body>
</html>